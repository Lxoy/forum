<div class="profile-container">

  <div class="profile-card">

    <div class="avatar">
      <mat-icon>account_circle</mat-icon>
    </div>

    <!-- VIEW MODE -->
    <div class="user-info" *ngIf="!editMode">
      <h2>{{ user?.username }}</h2>
      <p class="email">{{ user?.email }}</p>

      <div class="actions">
        <button mat-stroked-button color="primary" (click)="enableEdit()">
          Edit Profile
        </button>

        <button mat-flat-button color="warn" (click)="signOut()">
          Logout
        </button>
      </div>
    </div>

    <!-- EDIT MODE -->
    <form [formGroup]="profileForm" *ngIf="editMode" class="edit-form">

      <mat-form-field appearance="outline">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username">
        <mat-error *ngIf="profileForm.get('username')?.hasError('required')">
          Username is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email">
        <mat-error *ngIf="profileForm.get('email')?.hasError('required')">
          Email is required
        </mat-error>
        <mat-error *ngIf="profileForm.get('email')?.hasError('email')">
          Invalid email format
        </mat-error>
      </mat-form-field>

      <div class="actions">
        <button mat-flat-button color="primary" [disabled]="profileForm.invalid || isSaving" (click)="saveProfile()">
          {{ isSaving ? 'Saving...' : 'Save' }}
        </button>

        <button mat-stroked-button type="button" (click)="cancelEdit()">
          Cancel
        </button>
      </div>

    </form>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="success-message" *ngIf="successMessage">
      {{ successMessage }}
    </div>


  </div>

</div>